-- Create "settings" table
CREATE TABLE "settings" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "last_scanned_block_notificator" bigint NOT NULL, PRIMARY KEY ("id"));
-- Create index "settings_last_scanned_block_notificator_key" to table: "settings"
CREATE UNIQUE INDEX "settings_last_scanned_block_notificator_key" ON "settings" ("last_scanned_block_notificator");
-- Create "tasks" table
CREATE TABLE "tasks" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "name" character varying NOT NULL, "created_at" timestamptz NOT NULL, "data" bytea NOT NULL, PRIMARY KEY ("id"));
-- Create "users" table
CREATE TABLE "users" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "public_key" character varying NULL, "password" character varying NULL, "logged_in" boolean NOT NULL DEFAULT false, "last_access" timestamptz NULL, "lock_timeout" bigint NULL, "notify" boolean NOT NULL DEFAULT false, "notify_time" smallint NOT NULL DEFAULT 0, "notify_last_time" timestamptz NOT NULL, PRIMARY KEY ("id"));
-- Create index "user_public_key" to table: "users"
CREATE INDEX "user_public_key" ON "users" ("public_key");
-- Create "balances" table
CREATE TABLE "balances" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "balance" double precision NOT NULL, "height" bigint NOT NULL, "user_balance" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "balances_users_balance" FOREIGN KEY ("user_balance") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create index "balances_user_balance_key" to table: "balances"
CREATE UNIQUE INDEX "balances_user_balance_key" ON "balances" ("user_balance");
-- Create "rewards_data" table
CREATE TABLE "rewards_data" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "validator" character varying NOT NULL, "amount" character varying NOT NULL, "last_reward" timestamptz NOT NULL, "user_rewards_data" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "rewards_data_users_rewards_data" FOREIGN KEY ("user_rewards_data") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create "user_states" table
CREATE TABLE "user_states" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "state" character varying NOT NULL, "data" bytea NULL, "user_state" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "user_states_users_state" FOREIGN KEY ("user_state") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
-- Create index "user_states_user_state_key" to table: "user_states"
CREATE UNIQUE INDEX "user_states_user_state_key" ON "user_states" ("user_state");
-- Create "adress_books" table
CREATE TABLE "adress_books" ("id" bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY, "address" character varying NOT NULL, "name" character varying NOT NULL, "created_at" timestamptz NOT NULL, "in_update" boolean NOT NULL, "user_address_book" bigint NOT NULL, PRIMARY KEY ("id"), CONSTRAINT "adress_books_users_address_book" FOREIGN KEY ("user_address_book") REFERENCES "users" ("id") ON UPDATE NO ACTION ON DELETE CASCADE);
